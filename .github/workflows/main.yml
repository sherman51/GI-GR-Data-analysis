name: Keep Streamlit App Awake
on:
  schedule:
    # Every 13 minutes (less predictable pattern)
    - cron: '*/13 * * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping First App
        run: |
          echo "Pinging first app at $(date)"
          # Try to trigger actual page load
          curl -L -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" \
            -H "Accept-Language: en-US,en;q=0.5" \
            -H "Connection: keep-alive" \
            --max-time 30 \
            https://uploadpy-ynrhtmnl2zosu6yrhx3cfu.streamlit.app || echo "First app ping failed"
          sleep 5
          
      - name: Ping Second App
        run: |
          echo "Pinging second app at $(date)"
          curl -L -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" \
            -H "Accept-Language: en-US,en;q=0.5" \
            -H "Connection: keep-alive" \
            --max-time 30 \
            https://mzjkxsbu3as3cpy3kslh88.streamlit.app || echo "Second app ping failed"
